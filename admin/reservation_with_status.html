<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Reservasi</title>
    <link rel="icon" type="image/x-icon" href="../img/logo/logo-alt.png" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.datatables.net/1.13.7/css/dataTables.bootstrap5.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.datatables.net/responsive/2.5.0/css/responsive.bootstrap5.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body>
    <!-- Sidebar -->
    <div id="sidebar" class="sidebar">
      <div class="logo-container">
        <img src="../img/logo/logo-alt.png" alt="Logo" />
        <span>BOLOOO</span>
      </div>
      <div class="menu-item active-menu-item">
        <a href="dashboard.html"
          ><i class="bi bi-house-door me-2"></i> <span>Dashboard</span></a
        >
      </div>
      <div class="menu-item">
        <a href="mainCourse.html"
          ><i class="bi bi-egg-fried me-2"></i> <span>Main Course</span></a
        >
      </div>
      <div class="menu-item">
        <a href="drinks.html"
          ><i class="bi bi-cup me-2"></i> <span>Drinks</span></a
        >
      </div>
      <div class="menu-item">
        <a href="sideDish.html"
          ><i class="bi bi-egg me-2"></i></i> <span>Side Dish</span></a
        >
      </div>
      <div class="menu-item">
        <a href="package.html"
          ><i class="bi bi-basket3 me-2"></i></i> <span>Paket</span></a
        >
      </div>
      <div class="menu-item">
        <a href="order.html"
          ><i class="bi bi-cart3 me-2"></i> <span>Pesanan</span></a
        >
      </div>
      <div class="menu-item">
        <a href="reservation.html"
          ><i class="bi bi-calendar2-check me-2"></i> <span>Reservasi</span></a
        >
      </div>
      <div class="menu-item">
        <a href="jobs.html"
          ><i class="bi bi-briefcase me-2"></i> <span>Karir</span></a
        >
      </div>
      <div class="menu-item">
        <a href="applicant.html"
          ><i class="bi bi-person me-2"></i> <span>Pelamar</span></a
        >
      </div>
      <div class="menu-item">
        <a href="users.html"
          ><i class="bi bi-person me-2"></i> <span>Users</span></a
        >
      </div>
      <div class="menu-item">
        <a href="report.html"
          ><i class="bi bi-bar-chart-line me-2"></i> <span>Report</span></a
        >
      </div>
    </div>

    <!-- Main Content -->
    <div id="content" class="content">
      <!-- Navbar -->
      <nav class="navbar navbar-expand-lg navbar-light bg-light shadow-sm rounded">
        <div class="container-fluid">
          <button id="toggleSidebar" class="btn btn-outline-secondary me-3">
            <i class="bi bi-list"></i>
          </button>
          <a class="navbar-brand" href="#">Users</a>
          <div class="dropdown ms-auto">
            <button
              class="profile-button rounded"
              type="button"
              id="profileDropdown"
              data-bs-toggle="dropdown"
              aria-expanded="false">
              <img
                src="../img/profile-pic.png"
                alt="Profile"
                class="rounded-circle"/>
              <div class="text-start">
                <strong>Diki Alif</strong><br />
                <small class="text-muted">Super Admin</small>
              </div>
            </button>
            <ul
              class="dropdown-menu dropdown-menu-end profile-dropdown shadow"
              aria-labelledby="profileDropdown">
              <li>
                <a
                  class="dropdown-item"
                  href="#"
                  data-bs-toggle="modal"
                  data-bs-target="#profileModal">
                  <i class="bi bi-person me-2"></i>Profil
                </a>
              </li>
              <li><hr class="dropdown-divider" /></li>
              <li>
                <a class="dropdown-item text-danger" href="login.html"
                  ><i class="bi bi-box-arrow-right me-2"></i>Keluar</a>
              </li>
            </ul>
          </div>

      <!-- Tabel Reservasi -->
      <div class="main-content">
        <div class="table-container">
       <table
          id="reservationTable"
          class="table table-hover display responsive nowrap"
          style="width: 100%">
          <thead>
            <tr>
              <th>No.</th>
              <th>Nama Lengkap</th>
              <th>Jumlah Orang</th>
              <th>Tanggal & Waktu</th>
              <th>Pesanan</th>
              <th>Status Reservasi</th>
              <th>Aksi</th>
            </tr>
          </thead>
        </table>
      </div>

    <!-- JavaScript Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.0.js"></script>
    <script src="https://cdn.datatables.net/1.13.7/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.7/js/dataTables.bootstrap5.min.js"></script>
    <script src="https://cdn.datatables.net/responsive/2.5.0/js/dataTables.responsive.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <!-- Script -->
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const reservationData = [
          {
            id: 1,
            name: "John Doe",
            people: 2,
            dateTime: "2024-12-10 19:00",
            order: "Nasi Goreng, Teh Manis",
            status: "Pending",
          },
          {
            id: 2,
            name: "Jane Smith",
            people: 4,
            dateTime: "2024-12-11 20:00",
            order: "Mie Goreng, Kopi",
            status: "Konfirmasi",
          },
        ];

        const table = $("#reservationTable").DataTable({
          data: reservationData,
          columns: [
            {
              data: null,
              render: (data, type, row, meta) => meta.row + 1,
              className: "text-center",
            },
            { data: "name" },
            { data: "people" },
            { data: "dateTime" },
            { data: "order" },
            {
              data: "status",
              render: (data) => {
                let colorClass = "";
                switch (data) {
                  case "Pending":
                    colorClass = "bg-warning text-dark";
                    break;
                  case "Konfirmasi":
                    colorClass = "bg-primary text-white";
                    break;
                  case "Selesai":
                    colorClass = "bg-success text-white";
                    break;
                  case "Dibatalkan":
                    colorClass = "bg-danger text-white";
                    break;
                }
                return `<span class="badge ${colorClass}">${data}</span>`;
              },
            },
            {
              data: null,
              render: (data, type, row) => {
                return `
                  <button class="btn btn-sm btn-outline-success edit-status-btn" data-id="${row.id}">
                    <i class="bi bi-pencil"></i> Edit Status
                  </button>`;
              },
            },
          ],
        });

        $("#reservationTable").on("click", ".edit-status-btn", function () {
          const id = $(this).data("id");
          const reservation = reservationData.find((r) => r.id === id);
          if (reservation) {
            Swal.fire({
              title: "Ubah Status Reservasi",
              html: `
                <select id="statusSelect" class="form-select">
                  <option value="Pending" ${reservation.status === "Pending" ? "selected" : ""}>Pending</option>
                  <option value="Konfirmasi" ${reservation.status === "Konfirmasi" ? "selected" : ""}>Konfirmasi</option>
                  <option value="Selesai" ${reservation.status === "Selesai" ? "selected" : ""}>Selesai</option>
                  <option value="Dibatalkan" ${reservation.status === "Dibatalkan" ? "selected" : ""}>Dibatalkan</option>
                </select>
              `,
              showCancelButton: true,
              confirmButtonText: "Simpan",
            }).then((result) => {
              if (result.isConfirmed) {
                const newStatus = $("#statusSelect").val();
                reservation.status = newStatus;
                table.row($(this).closest("tr")).data(reservation).draw();
                Swal.fire(
                  "Berhasil",
                  "Status reservasi berhasil diubah.",
                  "success"
                );
              }
            });
          }
        });

        // Toggle Sidebar
        $("#toggleSidebar").on("click", () => {
          $("#sidebar").toggleClass("d-none");
        });

        // Active Sidebar Menu
        $(".menu-item a").on("click", function () {
          $(".menu-item").removeClass("active-menu-item");
          $(this).parent().addClass("active-menu-item");
        });
      });
    </script>
  </body>
</html>
